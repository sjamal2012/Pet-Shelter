!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define(["@angular/core","@angular/common"],t):"object"==typeof exports?exports["ngx-cookie"]=t(require("@angular/core"),require("@angular/common")):e["ngx-cookie"]=t(e["@angular/core"],e["@angular/common"])}(window,function(e,t){return function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=7)}([function(e,t,o){"use strict";var r=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var u=e.length-1;u>=0;u--)(n=e[u])&&(c=(i<3?n(c):i>3?n(t,o,c):n(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=o(2),c=o(1),u=o(3),s=function(){function e(e){this._optionsProvider=e,this.options=this._optionsProvider.options}return Object.defineProperty(e.prototype,"cookieString",{get:function(){return document.cookie||""},set:function(e){document.cookie=e},enumerable:!0,configurable:!0}),e.prototype.get=function(e){return this._cookieReader()[e]},e.prototype.getObject=function(e){var t=this.get(e);return t?u.safeJsonParse(t):t},e.prototype.getAll=function(){return this._cookieReader()},e.prototype.put=function(e,t,o){this._cookieWriter()(e,t,o)},e.prototype.putObject=function(e,t,o){this.put(e,JSON.stringify(t),o)},e.prototype.remove=function(e,t){this._cookieWriter()(e,void 0,t)},e.prototype.removeAll=function(e){var t=this,o=this.getAll();Object.keys(o).forEach(function(o){t.remove(o,e)})},e.prototype._cookieReader=function(){var e,t,o,r,n,i={},c="",s=this.cookieString;if(s!==c)for(e=(c=s).split("; "),i={},o=0;o<e.length;o++)(r=(t=e[o]).indexOf("="))>0&&(n=u.safeDecodeURIComponent(t.substring(0,r)),u.isBlank(i[n])&&(i[n]=u.safeDecodeURIComponent(t.substring(r+1))));return i},e.prototype._cookieWriter=function(){var e=this;return function(t,o,r){e.cookieString=e._buildCookieString(t,o,r)}},e.prototype._buildCookieString=function(e,t,o){var r=u.mergeOptions(this.options,o),n=r.expires;u.isBlank(t)&&(n="Thu, 01 Jan 1970 00:00:00 GMT",t=""),u.isString(n)&&(n=new Date(n));var i=r.storeUnencoded?t:encodeURIComponent(t),c=encodeURIComponent(e)+"="+i;c+=r.path?";path="+r.path:"",c+=r.domain?";domain="+r.domain:"",c+=n?";expires="+n.toUTCString():"",c+=r.secure?";secure":"";var s=(c+=r.httpOnly?"; HttpOnly":"").length+1;return s>4096&&console.log("Cookie '"+e+"' possibly not set or overflowed because it was too \n      large ("+s+" > 4096 bytes)!"),c},e=r([i.Injectable(),n("design:paramtypes",[c.CookieOptionsProvider])],e)}();t.CookieService=s},function(e,t,o){"use strict";var r=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var u=e.length-1;u>=0;u--)(n=e[u])&&(c=(i<3?n(c):i>3?n(t,o,c):n(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(o,r){t(o,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var c=o(2),u=o(6),s=o(3);t.COOKIE_OPTIONS=new c.InjectionToken("COOKIE_OPTIONS");var a=function(){function e(e,t){void 0===e&&(e={}),this._injector=t,this.defaultOptions={path:this._injector.get(u.APP_BASE_HREF,"/"),domain:null,expires:null,secure:!1,httpOnly:!1},this._options=s.mergeOptions(this.defaultOptions,e)}return Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),e=r([c.Injectable(),i(0,c.Inject(t.COOKIE_OPTIONS)),n("design:paramtypes",[Object,c.Injector])],e)}();t.CookieOptionsProvider=a},function(t,o){t.exports=e},function(e,t,o){"use strict";function r(e){return void 0!==e&&null!==e}Object.defineProperty(t,"__esModule",{value:!0}),t.isBlank=function(e){return void 0===e||null===e},t.isPresent=r,t.isString=function(e){return"string"==typeof e},t.mergeOptions=function(e,t){return t?{path:r(t.path)?t.path:e.path,domain:r(t.domain)?t.domain:e.domain,expires:r(t.expires)?t.expires:e.expires,secure:r(t.secure)?t.secure:e.secure,storeUnencoded:r(t.storeUnencoded)?t.storeUnencoded:e.storeUnencoded}:e},t.safeDecodeURIComponent=function(e){try{return decodeURIComponent(e)}catch(t){return e}},t.safeJsonParse=function(e){try{return JSON.parse(e)}catch(t){return e}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(0);t.cookieServiceFactory=function(e){return new r.CookieService(e)}},function(e,t,o){"use strict";var r,n=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var u=e.length-1;u>=0;u--)(n=e[u])&&(c=(i<3?n(c):i>3?n(t,o,c):n(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=this&&this.__param||function(e,t){return function(o,r){t(o,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(2),a=o(0),f=o(1),p=function(e){function t(t,o,r){var n=e.call(this,r)||this;return n.request=t,n.response=o,n}return n(t,e),Object.defineProperty(t.prototype,"cookieString",{get:function(){return this.request.headers.cookie||""},set:function(e){this.request.headers.cookie=e,this.response.headers.cookie=e},enumerable:!0,configurable:!0}),t=i([s.Injectable(),u(0,s.Inject("REQUEST")),u(1,s.Inject("RESPONSE")),c("design:paramtypes",[Object,Object,f.CookieOptionsProvider])],t)}(a.CookieService);t.CookieBackendService=p},function(e,o){e.exports=t},function(e,t,o){"use strict";var r=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var u=e.length-1;u>=0;u--)(n=e[u])&&(c=(i<3?n(c):i>3?n(t,o,c):n(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};function n(e){for(var o in e)t.hasOwnProperty(o)||(t[o]=e[o])}Object.defineProperty(t,"__esModule",{value:!0});var i=o(2),c=o(1),u=o(0),s=o(4);n(o(0)),n(o(5)),n(o(1)),n(o(4)),n(o(3));var a=function(){function e(){}return t=e,e.forRoot=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[{provide:c.COOKIE_OPTIONS,useValue:e},{provide:u.CookieService,useFactory:s.cookieServiceFactory,deps:[c.CookieOptionsProvider]}]}},e.forChild=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[{provide:c.COOKIE_OPTIONS,useValue:e},{provide:u.CookieService,useFactory:s.cookieServiceFactory,deps:[c.CookieOptionsProvider]}]}},e=t=r([i.NgModule({providers:[c.CookieOptionsProvider]})],e);var t}();t.CookieModule=a}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZ3gtY29va2llL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9uZ3gtY29va2llL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL25neC1jb29raWUvLi9zcmMvY29va2llLnNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vbmd4LWNvb2tpZS8uL3NyYy9jb29raWUtb3B0aW9ucy1wcm92aWRlci50cyIsIndlYnBhY2s6Ly9uZ3gtY29va2llL2V4dGVybmFsIFwiQGFuZ3VsYXIvY29yZVwiIiwid2VicGFjazovL25neC1jb29raWUvLi9zcmMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vbmd4LWNvb2tpZS8uL3NyYy9jb29raWUuZmFjdG9yeS50cyIsIndlYnBhY2s6Ly9uZ3gtY29va2llLy4vc3JjL2Nvb2tpZS1iYWNrZW5kLnNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vbmd4LWNvb2tpZS9leHRlcm5hbCBcIkBhbmd1bGFyL2NvbW1vblwiIiwid2VicGFjazovL25neC1jb29raWUvLi9pbmRleC50cyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMl9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNl9fIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJ2YWx1ZSIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX19kZWNvcmF0ZSIsInRoaXMiLCJkZWNvcmF0b3JzIiwidGFyZ2V0Iiwia2V5IiwiZGVzYyIsImFyZ3VtZW50cyIsImxlbmd0aCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsIl9fbWV0YWRhdGEiLCJrIiwidiIsIm1ldGFkYXRhIiwiY29yZV8xIiwiY29va2llX29wdGlvbnNfcHJvdmlkZXJfMSIsInV0aWxzXzEiLCJDb29raWVTZXJ2aWNlIiwiX29wdGlvbnNQcm92aWRlciIsIm9wdGlvbnMiLCJkb2N1bWVudCIsImNvb2tpZSIsInNldCIsInZhbCIsIl9jb29raWVSZWFkZXIiLCJnZXRPYmplY3QiLCJzYWZlSnNvblBhcnNlIiwiZ2V0QWxsIiwicHV0IiwiX2Nvb2tpZVdyaXRlciIsInB1dE9iamVjdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZW1vdmUiLCJ1bmRlZmluZWQiLCJyZW1vdmVBbGwiLCJfdGhpcyIsImNvb2tpZXMiLCJrZXlzIiwiZm9yRWFjaCIsImNvb2tpZUFycmF5IiwiaW5kZXgiLCJsYXN0Q29va2llcyIsImxhc3RDb29raWVTdHJpbmciLCJjdXJyZW50Q29va2llU3RyaW5nIiwiY29va2llU3RyaW5nIiwic3BsaXQiLCJpbmRleE9mIiwic2FmZURlY29kZVVSSUNvbXBvbmVudCIsInN1YnN0cmluZyIsImlzQmxhbmsiLCJ0aGF0IiwiX2J1aWxkQ29va2llU3RyaW5nIiwib3B0cyIsIm1lcmdlT3B0aW9ucyIsImV4cGlyZXMiLCJpc1N0cmluZyIsIkRhdGUiLCJjb29raWVWYWx1ZSIsInN0b3JlVW5lbmNvZGVkIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwic3RyIiwicGF0aCIsImRvbWFpbiIsInRvVVRDU3RyaW5nIiwic2VjdXJlIiwiY29va2llTGVuZ3RoIiwiaHR0cE9ubHkiLCJjb25zb2xlIiwibG9nIiwiSW5qZWN0YWJsZSIsIkNvb2tpZU9wdGlvbnNQcm92aWRlciIsIl9fcGFyYW0iLCJwYXJhbUluZGV4IiwiZGVjb3JhdG9yIiwiY29tbW9uXzEiLCJDT09LSUVfT1BUSU9OUyIsIkluamVjdGlvblRva2VuIiwiX2luamVjdG9yIiwiZGVmYXVsdE9wdGlvbnMiLCJBUFBfQkFTRV9IUkVGIiwiX29wdGlvbnMiLCJJbmplY3QiLCJJbmplY3RvciIsImlzUHJlc2VudCIsIm9iaiIsIm9sZE9wdGlvbnMiLCJuZXdPcHRpb25zIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZSIsInBhcnNlIiwiY29va2llX3NlcnZpY2VfMSIsImNvb2tpZVNlcnZpY2VGYWN0b3J5IiwiY29va2llT3B0aW9uc1Byb3ZpZGVyIiwiZXh0ZW5kU3RhdGljcyIsIl9fZXh0ZW5kcyIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJiIiwiX18iLCJjb25zdHJ1Y3RvciIsImNyZWF0ZSIsIkNvb2tpZUJhY2tlbmRTZXJ2aWNlIiwiX3N1cGVyIiwicmVxdWVzdCIsInJlc3BvbnNlIiwiaGVhZGVycyIsIl9fZXhwb3J0IiwiY29va2llX2ZhY3RvcnlfMSIsIkNvb2tpZU1vZHVsZSIsIkNvb2tpZU1vZHVsZV8xIiwiZm9yUm9vdCIsIm5nTW9kdWxlIiwicHJvdmlkZXJzIiwicHJvdmlkZSIsInVzZVZhbHVlIiwidXNlRmFjdG9yeSIsImRlcHMiLCJmb3JDaGlsZCIsIk5nTW9kdWxlIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxFQUFBRyxRQUFBLGlCQUFBQSxRQUFBLG9CQUNBLG1CQUFBQyxlQUFBQyxJQUNBRCxRQUFBLG1DQUFBSixHQUNBLGlCQUFBQyxRQUNBQSxRQUFBLGNBQUFELEVBQUFHLFFBQUEsaUJBQUFBLFFBQUEsb0JBRUFKLEVBQUEsY0FBQUMsRUFBQUQsRUFBQSxpQkFBQUEsRUFBQSxvQkFSQSxDQVNDTyxPQUFBLFNBQUFDLEVBQUFDLEdBQ0QsbUJDVEEsSUFBQUMsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYs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RUFBQSxHQUFBVSxHQUFBTCxPQUFBQyxlQUFBaUIsRUFBQUMsRUFBQWQsTUFFQSxTQUFBdUgsRUFBQWxJLEdBQ0EsUUFBQW1CLEtBQUFuQixFQUFBZixFQUFBaUMsZUFBQUMsS0FBQWxDLEVBQUFrQyxHQUFBbkIsRUFBQW1CLElBRUFiLE9BQUFDLGVBQUF0QixFQUFBLGNBQThDMkIsT0FBQSxJQUM5QyxJQUFBd0IsRUFBQTFDLEVBQUEsR0FDQTJDLEVBQUEzQyxFQUFBLEdBQ0F1SCxFQUFBdkgsRUFBQSxHQUNBeUksRUFBQXpJLEVBQUEsR0FDQXdJLEVBQUF4SSxFQUFBLElBQ0F3SSxFQUFBeEksRUFBQSxJQUNBd0ksRUFBQXhJLEVBQUEsSUFDQXdJLEVBQUF4SSxFQUFBLElBQ0F3SSxFQUFBeEksRUFBQSxJQUNBLElBQUEwSSxFQUFBLFdBQ0EsU0FBQUEsS0FzQ0EsT0FwQ0FDLEVBQUFELEVBTUFBLEVBQUFFLFFBQUEsU0FBQTdGLEdBRUEsWUFEQSxJQUFBQSxJQUFpQ0EsT0FFakM4RixTQUFBRixFQUNBRyxZQUNpQkMsUUFBQXBHLEVBQUE2RCxlQUFBd0MsU0FBQWpHLElBQ0FnRyxRQUFBeEIsRUFBQTFFLGNBQUFvRyxXQUFBUixFQUFBakIscUJBQUEwQixNQUFBdkcsRUFBQXdELDJCQVNqQnVDLEVBQUFTLFNBQUEsU0FBQXBHLEdBRUEsWUFEQSxJQUFBQSxJQUFpQ0EsT0FFakM4RixTQUFBRixFQUNBRyxZQUNpQkMsUUFBQXBHLEVBQUE2RCxlQUFBd0MsU0FBQWpHLElBQ0FnRyxRQUFBeEIsRUFBQTFFLGNBQUFvRyxXQUFBUixFQUFBakIscUJBQUEwQixNQUFBdkcsRUFBQXdELDJCQUlqQnVDLEVBQUFDLEVBQUFoSCxHQUNBZSxFQUFBMEcsVUFDQU4sV0FBQW5HLEVBQUF3RCwwQkFFQXVDLEdBRUEsSUFBQUMsRUF4Q0EsR0EwQ0FwSixFQUFBbUoiLCJmaWxlIjoibmd4LWNvb2tpZS51bWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJAYW5ndWxhci9jb3JlXCIpLCByZXF1aXJlKFwiQGFuZ3VsYXIvY29tbW9uXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcIkBhbmd1bGFyL2NvcmVcIiwgXCJAYW5ndWxhci9jb21tb25cIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wibmd4LWNvb2tpZVwiXSA9IGZhY3RvcnkocmVxdWlyZShcIkBhbmd1bGFyL2NvcmVcIiksIHJlcXVpcmUoXCJAYW5ndWxhci9jb21tb25cIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIm5neC1jb29raWVcIl0gPSBmYWN0b3J5KHJvb3RbXCJAYW5ndWxhci9jb3JlXCJdLCByb290W1wiQGFuZ3VsYXIvY29tbW9uXCJdKTtcbn0pKHdpbmRvdywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX182X18pIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA3KTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xudmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBjb3JlXzEgPSByZXF1aXJlKFwiQGFuZ3VsYXIvY29yZVwiKTtcbnZhciBjb29raWVfb3B0aW9uc19wcm92aWRlcl8xID0gcmVxdWlyZShcIi4vY29va2llLW9wdGlvbnMtcHJvdmlkZXJcIik7XG52YXIgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xudmFyIENvb2tpZVNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29va2llU2VydmljZShfb3B0aW9uc1Byb3ZpZGVyKSB7XG4gICAgICAgIHRoaXMuX29wdGlvbnNQcm92aWRlciA9IF9vcHRpb25zUHJvdmlkZXI7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHRoaXMuX29wdGlvbnNQcm92aWRlci5vcHRpb25zO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29va2llU2VydmljZS5wcm90b3R5cGUsIFwiY29va2llU3RyaW5nXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuY29va2llIHx8ICcnO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IHZhbDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogQG5hbWUgQ29va2llU2VydmljZSNnZXRcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIGdpdmVuIGNvb2tpZSBrZXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IElkIHRvIHVzZSBmb3IgbG9va3VwLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJhdyBjb29raWUgdmFsdWUuXG4gICAgICovXG4gICAgQ29va2llU2VydmljZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29va2llUmVhZGVyKClba2V5XTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBuYW1lIENvb2tpZVNlcnZpY2UjZ2V0T2JqZWN0XG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBSZXR1cm5zIHRoZSBkZXNlcmlhbGl6ZWQgdmFsdWUgb2YgZ2l2ZW4gY29va2llIGtleS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgSWQgdG8gdXNlIGZvciBsb29rdXAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gRGVzZXJpYWxpemVkIGNvb2tpZSB2YWx1ZS5cbiAgICAgKi9cbiAgICBDb29raWVTZXJ2aWNlLnByb3RvdHlwZS5nZXRPYmplY3QgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0KGtleSk7XG4gICAgICAgIHJldHVybiB2YWx1ZSA/IHV0aWxzXzEuc2FmZUpzb25QYXJzZSh2YWx1ZSkgOiB2YWx1ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBuYW1lIENvb2tpZVNlcnZpY2UjZ2V0QWxsXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBSZXR1cm5zIGEga2V5IHZhbHVlIG9iamVjdCB3aXRoIGFsbCB0aGUgY29va2llcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IEFsbCBjb29raWVzXG4gICAgICovXG4gICAgQ29va2llU2VydmljZS5wcm90b3R5cGUuZ2V0QWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29va2llUmVhZGVyKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAbmFtZSBDb29raWVTZXJ2aWNlI3B1dFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2V0cyBhIHZhbHVlIGZvciBnaXZlbiBjb29raWUga2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBJZCBmb3IgdGhlIGB2YWx1ZWAuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFJhdyB2YWx1ZSB0byBiZSBzdG9yZWQuXG4gICAgICogQHBhcmFtIHtDb29raWVPcHRpb25zfSBvcHRpb25zIChPcHRpb25hbCkgT3B0aW9ucyBvYmplY3QuXG4gICAgICovXG4gICAgQ29va2llU2VydmljZS5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fY29va2llV3JpdGVyKCkoa2V5LCB2YWx1ZSwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAbmFtZSBDb29raWVTZXJ2aWNlI3B1dE9iamVjdFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2VyaWFsaXplcyBhbmQgc2V0cyBhIHZhbHVlIGZvciBnaXZlbiBjb29raWUga2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBJZCBmb3IgdGhlIGB2YWx1ZWAuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlIFZhbHVlIHRvIGJlIHN0b3JlZC5cbiAgICAgKiBAcGFyYW0ge0Nvb2tpZU9wdGlvbnN9IG9wdGlvbnMgKE9wdGlvbmFsKSBPcHRpb25zIG9iamVjdC5cbiAgICAgKi9cbiAgICBDb29raWVTZXJ2aWNlLnByb3RvdHlwZS5wdXRPYmplY3QgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLnB1dChrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAbmFtZSBDb29raWVTZXJ2aWNlI3JlbW92ZVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogUmVtb3ZlIGdpdmVuIGNvb2tpZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgSWQgb2YgdGhlIGtleS12YWx1ZSBwYWlyIHRvIGRlbGV0ZS5cbiAgICAgKiBAcGFyYW0ge0Nvb2tpZU9wdGlvbnN9IG9wdGlvbnMgKE9wdGlvbmFsKSBPcHRpb25zIG9iamVjdC5cbiAgICAgKi9cbiAgICBDb29raWVTZXJ2aWNlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5LCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX2Nvb2tpZVdyaXRlcigpKGtleSwgdW5kZWZpbmVkLCBvcHRpb25zKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBuYW1lIENvb2tpZVNlcnZpY2UjcmVtb3ZlQWxsXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBSZW1vdmUgYWxsIGNvb2tpZXMuXG4gICAgICovXG4gICAgQ29va2llU2VydmljZS5wcm90b3R5cGUucmVtb3ZlQWxsID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGNvb2tpZXMgPSB0aGlzLmdldEFsbCgpO1xuICAgICAgICBPYmplY3Qua2V5cyhjb29raWVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIF90aGlzLnJlbW92ZShrZXksIG9wdGlvbnMpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENvb2tpZVNlcnZpY2UucHJvdG90eXBlLl9jb29raWVSZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsYXN0Q29va2llcyA9IHt9O1xuICAgICAgICB2YXIgbGFzdENvb2tpZVN0cmluZyA9ICcnO1xuICAgICAgICB2YXIgY29va2llQXJyYXksIGNvb2tpZSwgaSwgaW5kZXgsIG5hbWU7XG4gICAgICAgIHZhciBjdXJyZW50Q29va2llU3RyaW5nID0gdGhpcy5jb29raWVTdHJpbmc7XG4gICAgICAgIGlmIChjdXJyZW50Q29va2llU3RyaW5nICE9PSBsYXN0Q29va2llU3RyaW5nKSB7XG4gICAgICAgICAgICBsYXN0Q29va2llU3RyaW5nID0gY3VycmVudENvb2tpZVN0cmluZztcbiAgICAgICAgICAgIGNvb2tpZUFycmF5ID0gbGFzdENvb2tpZVN0cmluZy5zcGxpdCgnOyAnKTtcbiAgICAgICAgICAgIGxhc3RDb29raWVzID0ge307XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY29va2llQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb29raWUgPSBjb29raWVBcnJheVtpXTtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGNvb2tpZS5pbmRleE9mKCc9Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBuYW1lID0gdXRpbHNfMS5zYWZlRGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZS5zdWJzdHJpbmcoMCwgaW5kZXgpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGZpcnN0IHZhbHVlIHRoYXQgaXMgc2VlbiBmb3IgYSBjb29raWUgaXMgdGhlIG1vc3RcbiAgICAgICAgICAgICAgICAgICAgLy8gc3BlY2lmaWMgb25lLiAgdmFsdWVzIGZvciB0aGUgc2FtZSBjb29raWUgbmFtZSB0aGF0XG4gICAgICAgICAgICAgICAgICAgIC8vIGZvbGxvdyBhcmUgZm9yIGxlc3Mgc3BlY2lmaWMgcGF0aHMuXG4gICAgICAgICAgICAgICAgICAgIGlmICh1dGlsc18xLmlzQmxhbmsobGFzdENvb2tpZXNbbmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0Q29va2llc1tuYW1lXSA9IHV0aWxzXzEuc2FmZURlY29kZVVSSUNvbXBvbmVudChjb29raWUuc3Vic3RyaW5nKGluZGV4ICsgMSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsYXN0Q29va2llcztcbiAgICB9O1xuICAgIENvb2tpZVNlcnZpY2UucHJvdG90eXBlLl9jb29raWVXcml0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgdGhhdC5jb29raWVTdHJpbmcgPSB0aGF0Ll9idWlsZENvb2tpZVN0cmluZyhuYW1lLCB2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBDb29raWVTZXJ2aWNlLnByb3RvdHlwZS5fYnVpbGRDb29raWVTdHJpbmcgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIG9wdHMgPSB1dGlsc18xLm1lcmdlT3B0aW9ucyh0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgICB2YXIgZXhwaXJlcyA9IG9wdHMuZXhwaXJlcztcbiAgICAgICAgaWYgKHV0aWxzXzEuaXNCbGFuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGV4cGlyZXMgPSAnVGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVQnO1xuICAgICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAodXRpbHNfMS5pc1N0cmluZyhleHBpcmVzKSkge1xuICAgICAgICAgICAgZXhwaXJlcyA9IG5ldyBEYXRlKGV4cGlyZXMpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb29raWVWYWx1ZSA9IG9wdHMuc3RvcmVVbmVuY29kZWQgPyB2YWx1ZSA6IGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG4gICAgICAgIHZhciBzdHIgPSBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnPScgKyBjb29raWVWYWx1ZTtcbiAgICAgICAgc3RyICs9IG9wdHMucGF0aCA/ICc7cGF0aD0nICsgb3B0cy5wYXRoIDogJyc7XG4gICAgICAgIHN0ciArPSBvcHRzLmRvbWFpbiA/ICc7ZG9tYWluPScgKyBvcHRzLmRvbWFpbiA6ICcnO1xuICAgICAgICBzdHIgKz0gZXhwaXJlcyA/ICc7ZXhwaXJlcz0nICsgZXhwaXJlcy50b1VUQ1N0cmluZygpIDogJyc7XG4gICAgICAgIHN0ciArPSBvcHRzLnNlY3VyZSA/ICc7c2VjdXJlJyA6ICcnO1xuICAgICAgICBzdHIgKz0gb3B0cy5odHRwT25seSA/ICc7IEh0dHBPbmx5JyA6ICcnO1xuICAgICAgICAvLyBwZXIgaHR0cDovL3d3dy5pZXRmLm9yZy9yZmMvcmZjMjEwOS50eHQgYnJvd3NlciBtdXN0IGFsbG93IGF0IG1pbmltdW06XG4gICAgICAgIC8vIC0gMzAwIGNvb2tpZXNcbiAgICAgICAgLy8gLSAyMCBjb29raWVzIHBlciB1bmlxdWUgZG9tYWluXG4gICAgICAgIC8vIC0gNDA5NiBieXRlcyBwZXIgY29va2llXG4gICAgICAgIHZhciBjb29raWVMZW5ndGggPSBzdHIubGVuZ3RoICsgMTtcbiAgICAgICAgaWYgKGNvb2tpZUxlbmd0aCA+IDQwOTYpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29va2llICdcIiArIG5hbWUgKyBcIicgcG9zc2libHkgbm90IHNldCBvciBvdmVyZmxvd2VkIGJlY2F1c2UgaXQgd2FzIHRvbyBcXG4gICAgICBsYXJnZSAoXCIgKyBjb29raWVMZW5ndGggKyBcIiA+IDQwOTYgYnl0ZXMpIVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH07XG4gICAgQ29va2llU2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBjb3JlXzEuSW5qZWN0YWJsZSgpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW2Nvb2tpZV9vcHRpb25zX3Byb3ZpZGVyXzEuQ29va2llT3B0aW9uc1Byb3ZpZGVyXSlcbiAgICBdLCBDb29raWVTZXJ2aWNlKTtcbiAgICByZXR1cm4gQ29va2llU2VydmljZTtcbn0oKSk7XG5leHBvcnRzLkNvb2tpZVNlcnZpY2UgPSBDb29raWVTZXJ2aWNlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG52YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XG59O1xudmFyIF9fcGFyYW0gPSAodGhpcyAmJiB0aGlzLl9fcGFyYW0pIHx8IGZ1bmN0aW9uIChwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgY29yZV8xID0gcmVxdWlyZShcIkBhbmd1bGFyL2NvcmVcIik7XG52YXIgY29tbW9uXzEgPSByZXF1aXJlKFwiQGFuZ3VsYXIvY29tbW9uXCIpO1xudmFyIHV0aWxzXzEgPSByZXF1aXJlKFwiLi91dGlsc1wiKTtcbmV4cG9ydHMuQ09PS0lFX09QVElPTlMgPSBuZXcgY29yZV8xLkluamVjdGlvblRva2VuKCdDT09LSUVfT1BUSU9OUycpO1xuLyoqIEBwcml2YXRlICovXG52YXIgQ29va2llT3B0aW9uc1Byb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvb2tpZU9wdGlvbnNQcm92aWRlcihvcHRpb25zLCBfaW5qZWN0b3IpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgdGhpcy5faW5qZWN0b3IgPSBfaW5qZWN0b3I7XG4gICAgICAgIHRoaXMuZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICAgICAgICBwYXRoOiB0aGlzLl9pbmplY3Rvci5nZXQoY29tbW9uXzEuQVBQX0JBU0VfSFJFRiwgJy8nKSxcbiAgICAgICAgICAgIGRvbWFpbjogbnVsbCxcbiAgICAgICAgICAgIGV4cGlyZXM6IG51bGwsXG4gICAgICAgICAgICBzZWN1cmU6IGZhbHNlLFxuICAgICAgICAgICAgaHR0cE9ubHk6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSB1dGlsc18xLm1lcmdlT3B0aW9ucyh0aGlzLmRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvb2tpZU9wdGlvbnNQcm92aWRlci5wcm90b3R5cGUsIFwib3B0aW9uc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIENvb2tpZU9wdGlvbnNQcm92aWRlciA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBjb3JlXzEuSW5qZWN0YWJsZSgpLFxuICAgICAgICBfX3BhcmFtKDAsIGNvcmVfMS5JbmplY3QoZXhwb3J0cy5DT09LSUVfT1BUSU9OUykpLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgY29yZV8xLkluamVjdG9yXSlcbiAgICBdLCBDb29raWVPcHRpb25zUHJvdmlkZXIpO1xuICAgIHJldHVybiBDb29raWVPcHRpb25zUHJvdmlkZXI7XG59KCkpO1xuZXhwb3J0cy5Db29raWVPcHRpb25zUHJvdmlkZXIgPSBDb29raWVPcHRpb25zUHJvdmlkZXI7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzJfXzsiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmZ1bmN0aW9uIGlzQmxhbmsob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gdW5kZWZpbmVkIHx8IG9iaiA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNCbGFuayA9IGlzQmxhbms7XG5mdW5jdGlvbiBpc1ByZXNlbnQob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAhPT0gdW5kZWZpbmVkICYmIG9iaiAhPT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNQcmVzZW50ID0gaXNQcmVzZW50O1xuZnVuY3Rpb24gaXNTdHJpbmcob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuZnVuY3Rpb24gbWVyZ2VPcHRpb25zKG9sZE9wdGlvbnMsIG5ld09wdGlvbnMpIHtcbiAgICBpZiAoIW5ld09wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG9sZE9wdGlvbnM7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHBhdGg6IGlzUHJlc2VudChuZXdPcHRpb25zLnBhdGgpID8gbmV3T3B0aW9ucy5wYXRoIDogb2xkT3B0aW9ucy5wYXRoLFxuICAgICAgICBkb21haW46IGlzUHJlc2VudChuZXdPcHRpb25zLmRvbWFpbikgPyBuZXdPcHRpb25zLmRvbWFpbiA6IG9sZE9wdGlvbnMuZG9tYWluLFxuICAgICAgICBleHBpcmVzOiBpc1ByZXNlbnQobmV3T3B0aW9ucy5leHBpcmVzKSA/IG5ld09wdGlvbnMuZXhwaXJlcyA6IG9sZE9wdGlvbnMuZXhwaXJlcyxcbiAgICAgICAgc2VjdXJlOiBpc1ByZXNlbnQobmV3T3B0aW9ucy5zZWN1cmUpID8gbmV3T3B0aW9ucy5zZWN1cmUgOiBvbGRPcHRpb25zLnNlY3VyZSxcbiAgICAgICAgc3RvcmVVbmVuY29kZWQ6IGlzUHJlc2VudChuZXdPcHRpb25zLnN0b3JlVW5lbmNvZGVkKSA/IG5ld09wdGlvbnMuc3RvcmVVbmVuY29kZWQgOiBvbGRPcHRpb25zLnN0b3JlVW5lbmNvZGVkLFxuICAgIH07XG59XG5leHBvcnRzLm1lcmdlT3B0aW9ucyA9IG1lcmdlT3B0aW9ucztcbmZ1bmN0aW9uIHNhZmVEZWNvZGVVUklDb21wb25lbnQoc3RyKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzdHIpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cbn1cbmV4cG9ydHMuc2FmZURlY29kZVVSSUNvbXBvbmVudCA9IHNhZmVEZWNvZGVVUklDb21wb25lbnQ7XG5mdW5jdGlvbiBzYWZlSnNvblBhcnNlKHN0cikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHN0cik7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfVxufVxuZXhwb3J0cy5zYWZlSnNvblBhcnNlID0gc2FmZUpzb25QYXJzZTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGNvb2tpZV9zZXJ2aWNlXzEgPSByZXF1aXJlKFwiLi9jb29raWUuc2VydmljZVwiKTtcbmZ1bmN0aW9uIGNvb2tpZVNlcnZpY2VGYWN0b3J5KGNvb2tpZU9wdGlvbnNQcm92aWRlcikge1xuICAgIHJldHVybiBuZXcgY29va2llX3NlcnZpY2VfMS5Db29raWVTZXJ2aWNlKGNvb2tpZU9wdGlvbnNQcm92aWRlcik7XG59XG5leHBvcnRzLmNvb2tpZVNlcnZpY2VGYWN0b3J5ID0gY29va2llU2VydmljZUZhY3Rvcnk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xudmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKGssIHYpO1xufTtcbnZhciBfX3BhcmFtID0gKHRoaXMgJiYgdGhpcy5fX3BhcmFtKSB8fCBmdW5jdGlvbiAocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGNvcmVfMSA9IHJlcXVpcmUoXCJAYW5ndWxhci9jb3JlXCIpO1xudmFyIGNvb2tpZV9zZXJ2aWNlXzEgPSByZXF1aXJlKFwiLi9jb29raWUuc2VydmljZVwiKTtcbnZhciBjb29raWVfb3B0aW9uc19wcm92aWRlcl8xID0gcmVxdWlyZShcIi4vY29va2llLW9wdGlvbnMtcHJvdmlkZXJcIik7XG52YXIgQ29va2llQmFja2VuZFNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvb2tpZUJhY2tlbmRTZXJ2aWNlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENvb2tpZUJhY2tlbmRTZXJ2aWNlKHJlcXVlc3QsIHJlc3BvbnNlLCBfb3B0aW9uc1Byb3ZpZGVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIF9vcHRpb25zUHJvdmlkZXIpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnJlcXVlc3QgPSByZXF1ZXN0O1xuICAgICAgICBfdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb29raWVCYWNrZW5kU2VydmljZS5wcm90b3R5cGUsIFwiY29va2llU3RyaW5nXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0LmhlYWRlcnMuY29va2llIHx8ICcnO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5oZWFkZXJzLmNvb2tpZSA9IHZhbDtcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2UuaGVhZGVycy5jb29raWUgPSB2YWw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIENvb2tpZUJhY2tlbmRTZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgICAgIGNvcmVfMS5JbmplY3RhYmxlKCksXG4gICAgICAgIF9fcGFyYW0oMCwgY29yZV8xLkluamVjdCgnUkVRVUVTVCcpKSxcbiAgICAgICAgX19wYXJhbSgxLCBjb3JlXzEuSW5qZWN0KCdSRVNQT05TRScpKSxcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdCwgY29va2llX29wdGlvbnNfcHJvdmlkZXJfMS5Db29raWVPcHRpb25zUHJvdmlkZXJdKVxuICAgIF0sIENvb2tpZUJhY2tlbmRTZXJ2aWNlKTtcbiAgICByZXR1cm4gQ29va2llQmFja2VuZFNlcnZpY2U7XG59KGNvb2tpZV9zZXJ2aWNlXzEuQ29va2llU2VydmljZSkpO1xuZXhwb3J0cy5Db29raWVCYWNrZW5kU2VydmljZSA9IENvb2tpZUJhY2tlbmRTZXJ2aWNlO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX182X187IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5mdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xufVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGNvcmVfMSA9IHJlcXVpcmUoXCJAYW5ndWxhci9jb3JlXCIpO1xudmFyIGNvb2tpZV9vcHRpb25zX3Byb3ZpZGVyXzEgPSByZXF1aXJlKFwiLi9zcmMvY29va2llLW9wdGlvbnMtcHJvdmlkZXJcIik7XG52YXIgY29va2llX3NlcnZpY2VfMSA9IHJlcXVpcmUoXCIuL3NyYy9jb29raWUuc2VydmljZVwiKTtcbnZhciBjb29raWVfZmFjdG9yeV8xID0gcmVxdWlyZShcIi4vc3JjL2Nvb2tpZS5mYWN0b3J5XCIpO1xuX19leHBvcnQocmVxdWlyZShcIi4vc3JjL2Nvb2tpZS5zZXJ2aWNlXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL3NyYy9jb29raWUtYmFja2VuZC5zZXJ2aWNlXCIpKTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL3NyYy9jb29raWUtb3B0aW9ucy1wcm92aWRlclwiKSk7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9zcmMvY29va2llLmZhY3RvcnlcIikpO1xuX19leHBvcnQocmVxdWlyZShcIi4vc3JjL3V0aWxzXCIpKTtcbnZhciBDb29raWVNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29va2llTW9kdWxlKCkge1xuICAgIH1cbiAgICBDb29raWVNb2R1bGVfMSA9IENvb2tpZU1vZHVsZTtcbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgaW4geW91ciByb290IG1vZHVsZSB0byBwcm92aWRlIHRoZSBDb29raWVTZXJ2aWNlXG4gICAgICogQHBhcmFtIHtDb29raWVPcHRpb25zfSBvcHRpb25zXG4gICAgICogQHJldHVybnMge01vZHVsZVdpdGhQcm92aWRlcnN9XG4gICAgICovXG4gICAgQ29va2llTW9kdWxlLmZvclJvb3QgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmdNb2R1bGU6IENvb2tpZU1vZHVsZV8xLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBjb29raWVfb3B0aW9uc19wcm92aWRlcl8xLkNPT0tJRV9PUFRJT05TLCB1c2VWYWx1ZTogb3B0aW9ucyB9LFxuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogY29va2llX3NlcnZpY2VfMS5Db29raWVTZXJ2aWNlLCB1c2VGYWN0b3J5OiBjb29raWVfZmFjdG9yeV8xLmNvb2tpZVNlcnZpY2VGYWN0b3J5LCBkZXBzOiBbY29va2llX29wdGlvbnNfcHJvdmlkZXJfMS5Db29raWVPcHRpb25zUHJvdmlkZXJdIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCBpbiB5b3VyIG90aGVyIChub24gcm9vdCkgbW9kdWxlcyB0byBpbXBvcnQgdGhlIGRpcmVjdGl2ZS9waXBlXG4gICAgICogQHBhcmFtIHtDb29raWVPcHRpb25zfSBvcHRpb25zXG4gICAgICogQHJldHVybnMge01vZHVsZVdpdGhQcm92aWRlcnN9XG4gICAgICovXG4gICAgQ29va2llTW9kdWxlLmZvckNoaWxkID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBDb29raWVNb2R1bGVfMSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogY29va2llX29wdGlvbnNfcHJvdmlkZXJfMS5DT09LSUVfT1BUSU9OUywgdXNlVmFsdWU6IG9wdGlvbnMgfSxcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IGNvb2tpZV9zZXJ2aWNlXzEuQ29va2llU2VydmljZSwgdXNlRmFjdG9yeTogY29va2llX2ZhY3RvcnlfMS5jb29raWVTZXJ2aWNlRmFjdG9yeSwgZGVwczogW2Nvb2tpZV9vcHRpb25zX3Byb3ZpZGVyXzEuQ29va2llT3B0aW9uc1Byb3ZpZGVyXSB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBDb29raWVNb2R1bGUgPSBDb29raWVNb2R1bGVfMSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBjb3JlXzEuTmdNb2R1bGUoe1xuICAgICAgICAgICAgcHJvdmlkZXJzOiBbY29va2llX29wdGlvbnNfcHJvdmlkZXJfMS5Db29raWVPcHRpb25zUHJvdmlkZXJdXG4gICAgICAgIH0pXG4gICAgXSwgQ29va2llTW9kdWxlKTtcbiAgICByZXR1cm4gQ29va2llTW9kdWxlO1xuICAgIHZhciBDb29raWVNb2R1bGVfMTtcbn0oKSk7XG5leHBvcnRzLkNvb2tpZU1vZHVsZSA9IENvb2tpZU1vZHVsZTtcbiJdLCJzb3VyY2VSb290IjoiIn0=